
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="初雪的中二 &amp; 爆肝工程師之路">
    <title>猴子也能看懂的 React 教學 - 2 - 開始打 code 啦~ - 初雪的中二 &amp; 爆肝工程師之路</title>
    <meta name="author" content="Jacky Wu (Hatsuyuki Wu)">
    
    
        <link rel="icon" href="https://j6qup3.github.io/assets/images/header.jpg">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="ES5 VS ES6
Component
refs">
<meta property="og:type" content="blog">
<meta property="og:title" content="猴子也能看懂的 React 教學 - 2 - 開始打 code 啦~">
<meta property="og:url" content="https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/index.html">
<meta property="og:site_name" content="初雪的中二 & 爆肝工程師之路">
<meta property="og:description" content="ES5 VS ES6
Component
refs">
<meta property="og:updated_time" content="2016-08-30T14:49:41.892Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="猴子也能看懂的 React 教學 - 2 - 開始打 code 啦~">
<meta name="twitter:description" content="ES5 VS ES6
Component
refs">
<meta name="twitter:creator" content="@HatsuyukiWu">
    
        <link rel="publisher" href="https://plus.google.com/114245960585614280000"/>
    
    
        
            <meta property="fb:admins" content="574463639365160" />
        
    
    
        <meta property="og:image" content="https://j6qup3.github.io/assets/images/header.jpg"/>
    
    
    
        <meta property="og:image" content="https://j6qup3.github.io/assets/images/58005272_p0.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://j6qup3.github.io/assets/images/58005272_p0.png" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">初雪的中二 &amp; 爆肝工程師之路</a>
    </div>
    
        
            <a  class="header-right-icon "
                href="#about">
        
        
            <i class="fa fa-lg fa-question"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/header.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Jacky Wu (Hatsuyuki Wu)</h4>
                
                    <h5 class="sidebar-profile-bio"><p>我在巨人的肩膀上拋下這條繩索，爬上來吧！<br><strong>你將佇立於我的肩膀之上。</strong></p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/j6qup3" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/jacky.wu.792303" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://plus.google.com/u/1/114245960585614281350" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-google-plus"></i>
                        <span class="sidebar-button-desc">Google Plus</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:j6qup3378815@gmail.com" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-left
                    "
             style="background-image:url('https://j6qup3.github.io/assets/images/58005272_p0.png');"
             data-behavior="4">
            
                <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            猴子也能看懂的 React 教學 - 2 - 開始打 code 啦~
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" datetime="2016-08-10T01:14:20+08:00">
	
		    8月 10, 2016
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/categories/教學/">教學</a>


    
</div>

</div>
            
        </div>

            <div id="main" data-behavior="4"
                 class="hasCover
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <!-- excerpt -->
<p>這篇就會開始打 code 囉。<br>不過首先先補充一些重要的概念。</p>
<hr>
<h1 id="table-of-contents">目錄</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ES5-VS-ES6"><span class="toc-text">ES5 VS ES6</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#class"><span class="toc-text">class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React-createClass-VS-extends-React-Component"><span class="toc-text">React.createClass VS extends React.Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Props-amp-State"><span class="toc-text">Props & State</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bind"><span class="toc-text">bind</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模組規範的整合"><span class="toc-text">模組規範的整合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#require-VS-import"><span class="toc-text">require VS import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#module-exports-VS-export-default"><span class="toc-text">module.exports VS export default</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#export-amp-import"><span class="toc-text">export & import{}</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arrow-functions"><span class="toc-text">Arrow functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Template-Strings"><span class="toc-text">Template Strings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#…"><span class="toc-text">…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#參數預設值"><span class="toc-text">參數預設值</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Component"><span class="toc-text">Component</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#設計-Component"><span class="toc-text">設計 Component</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-Component"><span class="toc-text">使用 Component</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-疊疊樂"><span class="toc-text">Component 疊疊樂</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#父子-Component-間資訊的傳遞"><span class="toc-text">父子 Component 間資訊的傳遞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#props-children"><span class="toc-text">props.children</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props-傳遞技巧"><span class="toc-text">props 傳遞技巧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props-傳遞地獄"><span class="toc-text">props 傳遞地獄</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#refs"><span class="toc-text">refs</span></a></li></ol>
<hr>
<h1 id="ES5-VS-ES6"><a href="#ES5-VS-ES6" class="headerlink" title="ES5 VS ES6"></a>ES5 VS ES6</h1><h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><p>有接觸過物件導向程式語言的對 <strong>class</strong> 應該不陌生吧？JS 雖然是以函數導向為主，但在 ES6 中新增了 class 的<strong>語法糖</strong>，繼承和建構子之類的 class 基礎語法都可以使用，詳細使用方法和功能可以看<a href="http://www.infoq.com/cn/articles/es6-in-depth-classes" target="_blank" rel="external">這篇</a>。</p>
<h3 id="React-createClass-VS-extends-React-Component"><a href="#React-createClass-VS-extends-React-Component" class="headerlink" title="React.createClass VS extends React.Component"></a>React.createClass VS extends React.Component</h3><p>React 中可以利用繼承 <strong>React.Component</strong> 來建立 Component：<br>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Demo = React.createClass(&#123;</div><div class="line">  a: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;...&#125;,</div><div class="line">  b: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;...&#125;,</div><div class="line">  render: fucntion() &#123;</div><div class="line">  	<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">  a() &#123;...&#125;</div><div class="line">  b() &#123;...&#125;</div><div class="line">  render() &#123;</div><div class="line">  	<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>React.createClass 是傳入一個物件，其屬性值可以是函數或值，換成 class 就可以直接宣告函數或變數，看起來比較直觀。<br>另外，ES6 可以把 React component 生命周期之一 <strong>componentWillMount</strong> 內的程式碼放在建構子 (<strong>constructor</strong>) 中。</p>
<h3 id="Props-amp-State"><a href="#Props-amp-State" class="headerlink" title="Props &amp; State"></a>Props &amp; State</h3><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Demo = React.createClass(&#123;</div><div class="line">  getDefaultProps: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      c8763: <span class="number">87</span>,</div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line">  propTypes: &#123;</div><div class="line">    c8763: React.PropTypes.number.isRequired,</div><div class="line">  &#125;,</div><div class="line">  getInitialState: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      a: <span class="keyword">this</span>.props.c8763,</div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line">  render: fucntion() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">  <span class="keyword">static</span> defaultProps = &#123;</div><div class="line">    c8763: <span class="number">87</span>,</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">static</span> propTypes = &#123;</div><div class="line">    c8763: React.PropTypes.number.isRequired,</div><div class="line">  &#125;;</div><div class="line">  state = &#123;</div><div class="line">    a: <span class="keyword">this</span>.props.c8763,</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">  	<span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的範例顯示出 defaultProps 和 propTypes 設定上的差別，還有 state 初始化的異同。<br>另外也可以在建構子內初始化 state，如果要做一些運算的話這樣比較方便：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props)&#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      a: <span class="keyword">this</span>.props.c8763,</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Demo = React.createClass(&#123;</div><div class="line">  c8763: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;c8763: <span class="number">87</span>&#125;);</div><div class="line">  &#125;,</div><div class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.c8763&#125;</span>&gt;</span>c8763<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  c8763() &#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;c8763: <span class="number">87</span>&#125;);</div><div class="line">  &#125;</div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">	    &#123;// 二選一&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.c8763.bind(this)&#125;</span>&gt;</span>c8763<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;function()</span> &#123;<span class="attr">this.c8763</span>()&#125;&#125;&gt;</span>c8763<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>React.createClass 預設會自動幫你 bind <code>this</code> 到 method，所以在 method 中使用的 this 都是指到該 Component (Demo) 的 instance，也就是 Virtural DOM 中的 tag。<br>但如果用 class extends React.Component 的話，不會自動 bind <code>this</code> 到 method，上面的例子如果直接在 button 的 onClick 呼叫 <code>this.c8763()</code> 的話，那麼 <code>c8763()</code> 內 <code>this.setState({c8763: 87});</code> 的 <code>this</code> 是指到 button 而非 Demo，所以我們要手動 bind 或是用匿名函數包住。<br>如果有多個 tag 用到這個 function 的話，可以在建構子中直接寫 <code>this.c8763 = this.c8763.bind(this);</code>，之後就可以直接調用 <code>this.c8763()</code> 了。</p>
<h2 id="模組規範的整合"><a href="#模組規範的整合" class="headerlink" title="模組規範的整合"></a>模組規範的整合</h2><p>ES6 兼容 CommonJS 和 AMD 這兩種著名的模組規範。</p>
<h3 id="require-VS-import"><a href="#require-VS-import" class="headerlink" title="require VS import"></a>require VS import</h3><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react'</span>);</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div></pre></td></tr></table></figure></p>
<p>require 是 CommonJS 引入模組的寫法，ES6 則走 Python 風，使用關鍵字 import，後面分號還可以省略，夠 Python 吧？</p>
<p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'c8763.css'</span>);</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'c8763.css'</span>;</div></pre></td></tr></table></figure></p>
<p>直接引入一個文件，像是 css。</p>
<h3 id="module-exports-VS-export-default"><a href="#module-exports-VS-export-default" class="headerlink" title="module.exports VS export default"></a>module.exports VS export default</h3><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Demo = React.createClass(&#123; ... &#125;);</div><div class="line"><span class="built_in">module</span>.exports = Demo;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123; ... &#125;</div></pre></td></tr></table></figure></p>
<p>module.exports 是 CommonJS 模組輸出的寫法。與 import 相對，ES6 使用的是 export。default 則代表輸出只有它。<br>兩者後面可以接變數，函數，物件或 class。</p>
<h3 id="export-amp-import"><a href="#export-amp-import" class="headerlink" title="export &amp; import{}"></a>export &amp; import{}</h3><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// abc.jsx</span></div><div class="line"><span class="keyword">const</span> a = <span class="string">'A'</span>;</div><div class="line"><span class="keyword">const</span> b = <span class="string">'B'</span>;</div><div class="line"><span class="keyword">const</span> c = <span class="string">'C'</span>;</div><div class="line"><span class="built_in">module</span>.exports = &#123;a, b, c&#125;;</div><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">var</span> abc = <span class="built_in">require</span>(<span class="string">'./abc.jsx'</span>);</div><div class="line"><span class="keyword">var</span> a = abc.a;</div><div class="line"><span class="keyword">var</span> c = abc.c;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// abc.jsx</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="string">'A'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> b = <span class="string">'B'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> c = <span class="string">'C'</span>;</div><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> &#123;a, c&#125; <span class="keyword">from</span> <span class="string">'./abc.jsx'</span></div></pre></td></tr></table></figure></p>
<p>export 後面不加 default 的話代表輸出可能不只有它，會自動將所有 export 包成物件。<br>import 後面加大括號可以直接取出 module 的物件屬性，不過限制是存放的變數和物件屬性必須同名。</p>
<p>引入官方模組時也很好用，例如引入 react.Component：<br>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react'</span>);</div><div class="line"><span class="keyword">var</span> createClass = React.createClass;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div></pre></td></tr></table></figure></p>
<h2 id="Arrow-functions"><a href="#Arrow-functions" class="headerlink" title="Arrow functions"></a>Arrow functions</h2><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a =&gt; &#123;</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以把匿名函數的宣告精簡化，那個箭頭潮到出水。</p>
<h2 id="Template-Strings"><a href="#Template-Strings" class="headerlink" title="Template Strings"></a>Template Strings</h2><p>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> c = <span class="string">'c'</span>;</div><div class="line"><span class="keyword">var</span> c8763 = c + <span class="string">'8763'</span>;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> c = <span class="string">'c'</span>;</div><div class="line"><span class="keyword">var</span> c8763 = <span class="string">`<span class="subst">$&#123;c&#125;</span>8763`</span>;</div></pre></td></tr></table></figure></p>
<h2 id="…"><a href="#…" class="headerlink" title="…"></a>…</h2><p>呃，先說好，我沒偷懶，這真的是語法，可能是開發者<del>很無言</del>想不到其他符號吧。<br>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;c8763: <span class="number">87</span>, xxx: <span class="string">'xx'</span>&#125;</div><div class="line"><span class="keyword">var</span> b = &#123;c8763: <span class="number">87</span>, xxx: <span class="string">'xx'</span>, www: <span class="string">'XD'</span>&#125;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;c8763: <span class="number">87</span>, xxx: <span class="string">'xx'</span>&#125;</div><div class="line"><span class="keyword">var</span> b = &#123;...a, www: <span class="string">'XD'</span>&#125;</div></pre></td></tr></table></figure></p>
<p>迭代展開物件的屬性及其值。很常被用來設定 tag 的屬性和重新產生 state。</p>
<h2 id="參數預設值"><a href="#參數預設值" class="headerlink" title="參數預設值"></a>參數預設值</h2><p>不傳參數時自動用預設值，很多語言都有這設計，ES6 終於也設計了這功能，有了這個就更加方便了。<br>ES5<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">c8763</span>)</span>&#123;</div><div class="line">  c8763 = c8763 || <span class="number">87</span>;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ES6<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">c8763 = 87</span>)</span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ES5 和 ES6 對比詳細可以看<a href="http://blog.kdchang.cc/2016/04/04/react-react-native-es5-es6-cheat-sheet/" target="_blank" rel="external">這裡</a>。</p>
<hr>
<h1 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h1><h2 id="設計-Component"><a href="#設計-Component" class="headerlink" title="設計 Component"></a>設計 Component</h2><p>還記得上面有提到 ES6 可以使用 class 吧？React.Component 就是個 class，要建立 Component 第一步就是要<del>仁</del>繼承 (<strong>extends</strong>) 它。<br>首先，我們來看個範例：(JSX + ES6)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>React.Component 已經有 constructor 了，如果要覆寫的話要記得在最前面加上 <code>super(props);</code> 喔~<br>render() 之前在說 Component 生命周期時有提到，必須覆寫，並回傳 JSX tag /<code>null</code>/<code>false</code><br>還有別忘記最前面要引入 react 模組 (require 或 import 皆可)</p>
<h2 id="使用-Component"><a href="#使用-Component" class="headerlink" title="使用 Component"></a>使用 Component</h2><p>上面我們知道設計 Component 的方法了，那要怎麼使用它呢？<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.jsx</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> Demo <span class="keyword">from</span> <span class="string">'./Demo.jsx'</span></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Demo</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</div></pre></td></tr></table></figure></p>
<p>這樣就會把 Component Demo 置於 id 為 root 的 tag 中。<br>接下來就是用 babel 把 main.jsx 編譯成 js。<br>如果有安裝 babel-cli 的讀者可以用以下指令：<br><code>babel main.jsx -o compiled.js</code><br>這樣只要引入 compiled.js 就行了。</p>
<p>EX：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>C8763<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"compiled.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>記得加 <code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code> 喔，不然 main.jsx 中的 <code>document.getElementById(&#39;root&#39;)</code> 會抓不到 tag。</p>
<h2 id="Component-疊疊樂"><a href="#Component-疊疊樂" class="headerlink" title="Component 疊疊樂"></a>Component 疊疊樂</h2><p>當然 Component 裡面也可以包 Component。<br>新增 CustomButton.jsx：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// CustomButton.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span> C8763 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>修改 Demo.jsx：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> CustomButton <span class="keyword">from</span> <span class="string">'./CustomButton.jsx'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">CustomButton</span> /&gt;</span>;</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>引入後直接將其當 tag 使用即可。<br>通常 <code>Demo</code> 對於 <code>CustomButton</code> 來說是<strong>父 Component</strong>，反之則是<strong>子 Component</strong>。</p>
<h2 id="父子-Component-間資訊的傳遞"><a href="#父子-Component-間資訊的傳遞" class="headerlink" title="父子 Component 間資訊的傳遞"></a>父子 Component 間資訊的傳遞</h2><p>上一篇有提到 props，這裡直接仁來複習一下。</p>
<blockquote>
<p>props 是 React 父子元件間溝通的橋樑。靜態（唯讀）。<br>父元件用屬性賦值的方式傳給子元件，子元件用 this.props 讀取。但不應於子元件內變動 （唯讀）。<br><strong>父元件傳入的 props 改變將造成子元件重繪。</strong></p>
<p>EX：<br>父元件內<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">Fuck</span> <span class="attr">fuck</span>=<span class="string">"?"</span>/&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure></p>
</blockquote>
<p>子元件<code>Fuck</code>內<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;this.props.fuck&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>因為父元件傳入<code>?</code>，所以這裡會顯示<code>?</code></p>
<blockquote>
<p>– 仁自<a href="/2016/08/06/猴子也能看懂的-React-教學-1/#props-amp-states">前一篇</a></p>
</blockquote>
<p>同樣地，我們可以：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> CustomButton <span class="keyword">from</span> <span class="string">'./CustomButton.jsx'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">CustomButton</span> <span class="attr">text</span>=<span class="string">'C8763'</span>/&gt;</span>;</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// CustomButton.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span> &#123;this.props.text&#125; <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="props-children"><a href="#props-children" class="headerlink" title="props.children"></a>props.children</h3><p>之前我們都是用單個閉合標籤表示自定義 Component (像是<code>&lt;CustomButton /&gt;</code>)，然後再一層一層向內設計。但有時候我們想在父 Component 中決定子 Component 的內部結構。<br>這時，我們可能會這樣設計：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> CustomButton <span class="keyword">from</span> <span class="string">'./CustomButton.jsx'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">CustomButton</span> <span class="attr">content</span>=<span class="string">&#123;</span>&lt;<span class="attr">button</span>&gt;</span> &#123;...&#125; <span class="tag">&lt;/<span class="name">button</span>&gt;</span>&#125;/&gt;;</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">// CustomButton.jsx</div><div class="line">import React from 'react'</div><div class="line">export default class CustomButton extends React.Component &#123;</div><div class="line">  constructor(props) &#123;</div><div class="line">    super(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    return &#123;this.props.content&#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>利用 props 把子 Component 的內部結構傳進去，但這樣程式碼很醜，<del>身為肥宅工程師，本身就已經慘不忍睹了，怎麼還能讓程式碼跟我們一樣呢？</del><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Demo.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> CustomButton <span class="keyword">from</span> <span class="string">'./CustomButton.jsx'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">	  <span class="xml"><span class="tag">&lt;<span class="name">CustomButton</span>&gt;</span></span></div><div class="line">	    <span class="tag">&lt;<span class="name">button</span>&gt;</span> &#123;...&#125; <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">CustomButton</span>&gt;</span></div><div class="line">	);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// CustomButton.jsx</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &#123;<span class="keyword">this</span>.props.children&#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>這樣一來，程式碼就易讀很多了~</p>
<h3 id="props-傳遞技巧"><a href="#props-傳遞技巧" class="headerlink" title="props 傳遞技巧"></a>props 傳遞技巧</h3><p>資料只能在父子間傳遞，而且一般來說是父傳子，所以如果有兩個子元件想要溝通，資料通常會在父元件取得，再往下傳，由一個子元件的 callback function 觸發父元件重繪，改變另一個子元件的 props。<br>比如說想設計一個 Button，按下後會新增一個 Item，那我們可能會這樣設計：</p>
<ol>
<li>按下 Button 觸發 callback function</li>
<li>觸發父 Component setState</li>
<li>父 Component 重繪</li>
<li>改變 Item props</li>
<li>Item 重繪</li>
</ol>
<h3 id="props-傳遞地獄"><a href="#props-傳遞地獄" class="headerlink" title="props 傳遞地獄"></a>props 傳遞地獄</h3><p>當 Component 愈疊愈多層，想要把資料從最頂層的元件傳到最底層的元件就會愈麻煩，就是所謂的 <strong>props 傳遞地獄</strong>。<br>解決方法是使用後端框架 (EX: Redux) 將 state 集中起來，以便管理。<br>Redux 在第四篇會介紹。</p>
<hr>
<h1 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h1><p>雖說不建議直接操作實體 DOM，但有時候仍會碰到需要直接操作的情況。<br>這時可以設定<code>ref</code>屬性來存取實體 DOM：<br>若 ref 的值為字串，則可以透過<code>this.refs.字串值</code> 存取。<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">React.findDOMNode(<span class="keyword">this</span>.refs.theInput).focus();</div><div class="line">... (render 內)</div><div class="line">&lt;input ref=<span class="string">"theInput"</span>&gt;</div></pre></td></tr></table></figure></p>
<p>若 ref 的值為函數，則傳入的參數值為該元件本身。<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.input.focus();</div><div class="line">... (render 內)</div><div class="line">&lt;input ref=&#123;(input) =&gt; <span class="keyword">this</span>.input = input&#125;&gt;</div></pre></td></tr></table></figure></p>
<p>由於 React.findDOMNode() 傳回的是實體 DOM，所以必須確保實體 DOM 已經被渲染出來才能使用 (componentDidMount() 後面的才能用)</p>
<hr>
<p>先講到這，<a href="/2016/08/15/%E7%8C%B4%E5%AD%90%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84-React-%E6%95%99%E5%AD%B8-3/">下篇</a> 講的是開發工具 webpack 的環境建置及使用。如果有興趣可以繼續收看~</p>
<p>這篇會不定期更新，如果有打錯或有任何疑問都歡迎留言告知喔~<br>我們下篇再見~</p>
            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">標籤</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/React/">React</a> <a class="tag tag--primary tag--small t-link" href="/tags/教學/">教學</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/15/猴子也能看懂的-React-教學-3/"  data-tooltip="猴子也能看懂的 React 教學 - 3 - Webpack 建置指南">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/06/猴子也能看懂的-React-教學-1/" data-tooltip="猴子也能看懂的 React 教學 - 1 - React 概念">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 Jacky Wu (Hatsuyuki Wu). All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/15/猴子也能看懂的-React-教學-3/"  data-tooltip="猴子也能看懂的 React 教學 - 3 - Webpack 建置指南">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/08/06/猴子也能看懂的-React-教學-1/" data-tooltip="猴子也能看懂的 React 教學 - 1 - React 概念">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-google-plus"></i><span>分享到 Google+</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/header.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Jacky Wu (Hatsuyuki Wu)</h4>
        
            <div id="about-card-bio"><p>我在巨人的肩膀上拋下這條繩索，爬上來吧！<br><strong>你將佇立於我的肩膀之上。</strong></p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p><code>NULL</code></p>

            </div>
        
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/07/29/發文囉/">
                            <h3 class="media-heading">發文囉</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年7月29日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/06/猴子也能看懂的-React-教學-1/">
                            <img class="media-image" src="https://app.kxg.io/images/jiade/fb.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/06/猴子也能看懂的-React-教學-1/">
                            <h3 class="media-heading">猴子也能看懂的 React 教學 - 1 - React 概念</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年8月6日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>React 概念</p>
<ul>
<li>React 特色</li>
<li>Virtual DOM</li>
<li>JSX</li>
<li>props &amp; states</li>
<li>Component Lifecycle</li>
</ul>
<p>環境配置</p>
<ul>
<li>NPM</li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                            <img class="media-image" src="https://j6qup3.github.io/assets/images/58005272_p0.png" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/">
                            <h3 class="media-heading">猴子也能看懂的 React 教學 - 2 - 開始打 code 啦~</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年8月10日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><ul>
<li>ES5 VS ES6</li>
<li>Component</li>
<li>refs</li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/15/猴子也能看懂的-React-教學-3/">
                            <img class="media-image" src="http://i0.hdslb.com/bfs/archive/7a88ed5f1307295a8ac2624749cffd8b75cfc978.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/15/猴子也能看懂的-React-教學-3/">
                            <h3 class="media-heading">猴子也能看懂的 React 教學 - 3 - Webpack 建置指南</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年8月15日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>環境配置</p>
<ul>
<li>Webpack</li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/19/猴子也能看懂的-React-教學-4/">
                            <img class="media-image" src="https://j6qup3.github.io/assets/images/52031649_p0.png" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://j6qup3.github.io/2016/08/19/猴子也能看懂的-React-教學-4/">
                            <h3 class="media-heading">猴子也能看懂的 React 教學 - 4 - 從 React 走向框架，把後端移到前端</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年8月19日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><ul>
<li>React Router</li>
<li>Redux</li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 5 篇文章
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/40164373_p0.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://j6qup3.github.io/2016/08/10/猴子也能看懂的-React-教學-2/';
                 
                    this.page.identifier = '2016/08/10/猴子也能看懂的-React-教學-2/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'chu-xue-de-zhong-er-bao-gan-gong-cheng-shi-zhi-lu';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('2T7D0V4ZOQ', '7b153c653a2f10f792218e4c251eb802');
        var algoliaIndex = algoliaClient.initIndex('tranquilpeak');
    </script>

    </body>
</html>
